<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="S.K., GitHub: @sklykov" />
    <meta name="licensed" content="MIT" />
    <meta name="year" content="2024" />

    <title>Image processing in vanilla JS</title>

    <!-- Favicon specification from the local file. Generated by (thanks!): https://favicon.io/favicon-converter/  -->
    <link rel="icon" href="./favicon_image_process.ico" type="image/x-icon" />

    <!-- Load page logic from the external script file -->
    <script src="image_load_process.js"></script>
    <script src="dialog_windows.js"></script>

    <!-- Styling: main, adaptive and additional (for switching styles by JS script) files -->
    <link rel="stylesheet" href="image_upload_styles.css" />
    <link rel="stylesheet" href="adaptive_styles.css" />
    <link rel="stylesheet" href="additional_css_classes.css" />
  </head>

  <body>
    <dialog id="info-dialog">
      <p>
        Here are a few points about this page implementation and development
        shown. <br />
        For closing this dialog window, press 'Esc' on your keyboard or button
        below.
      </p>
      <p id="info-two-image-elements">
        The image is placed in the &lt canvas &gt HTML element, which allows
        changing image content.
      </p>
      <p id="info-two-image-elements">
        Blur is created by applying Gaussian kernel with width of specified
        pixels.
      </p>
      <button id="info-dialog-close-button">X Close</button>
      <!-- Symbol 'X' encoded as &#x2716 causes Prettier to throw an Exception -->
    </dialog>

    <!-- Page header spread on the width of a page -->
    <header id="page-header">
      <span> Image processing in JS </span>
      <select id="select-button">
        <option id="about-button">Dev. Hints</option>
        <option disabled>Credentials</option>
      </select>
    </header>

    <!-- Main container for the page content -->
    <main id="main-container" class="flexbox-container">
      <!-- Page header with the tips -->
      <section id="instructions-header-container">
        <h3 id="project-header">
          Project: Processing of the uploaded image (serverless, no storage
          except on a browser) using vanilla (without npm libraries) JS
        </h3>
        <div id="usage-info">
          Short instruction of page functionality usage:
          <ol id="info-list">
            <li id="info-point-1">
              Upload an image for processing, using the button below;
            </li>
            <li id="info-point-2">
              Note that the uploaded image is stored only in the browser session
              memory, it will be discarded after page reload / close;
            </li>
            <li id="info-point-3">
              This page is static (without the running backend) the host -
              GitHub pages, the code is
              <a
                class="link"
                href="https://github.com/sklykov/statpagefolio/tree/main/image_proc"
                target="_blank"
                >here</a
              >
            </li>
          </ol>
        </div>
      </section>

      <!-- Upload button, select image file, visible all time -->
      <section id="upload-image-container">
        <label id="upload-info" for="upload-button">
          To proceed, upload image using the button:
        </label>
        <input
          id="upload-button"
          type="file"
          accept="image/.jpg, image/.jpeg, image/.png, image/.bmp"
          title="Upload Image"
        />
      </section>

      <section id="image-associated-ctrls-box">
        <!-- Controlling of a image width -->
        <div id="associated-controls-container">
          <!-- Width of the images control, become visible only after image upload -->
          <div id="width-input-container">
            <div id="input-ticks-container">
              <input
                type="range"
                min="20"
                max="100"
                step="2"
                id="width-image-input"
                name="width-input"
                value="50"
                data-default="50"
                list="width-ticks"
                autocomplete="off"
                disabled
              />
              <datalist id="width-ticks">
                <option id="min-width-tick" value="20" label="20"></option>
                <option id="max-width-tick" value="100" label="100"></option>
              </datalist>
            </div>
            <label for="widthImageInput" id="width-label">
              - Control image width shown on the page (% of its width)
            </label>
          </div>
        </div>
      </section>

      <!-- Control buttons: download / clear image, reset filters -->
      <section id="image-ctrls-box">
        <div id="buttons-container">
          <!-- Download image button, used for evoking JS code -->
          <button id="download-button" class="action-button">
            Download Image
          </button>
          <!-- Clear image from the <canvas> element -->
          <button id="clear-image-button" class="action-button">
            Clear Image
          </button>
          <!-- Reset Button -->
          <button id="reset-button" class="action-button">Reset filters</button>
        </div>
        <div id="image-container">
          <!-- Canvas element - the container for upload image representation -->
          <canvas id="canvas-element">
            This text is displayed if JavaScript is switched off or the browser
            doesn't support canvas element.
          </canvas>
          <!-- Image container, used for comparison of the effect of applied filter with <canvas> element, invisible now -->
          <img id="img-element" alt="No Image Uploaded, if you see this :-)" />
        </div>
      </section>

      <!-- Container for processing parameters inputs -->
      <section id="processing-controls">
        <!-- Image manipulation controls for effects: blur, ... -->
        <div id="image-manipulation-controls-box">
          <!-- Blur -->
          <div id="blur-control-container" class="input-container">
            <label for="blur-control" id="blur-label">
              Blur kernel size [px]:
            </label>
            <div class="input-label-container">
              <input
                type="range"
                min="0.0"
                max="10.0"
                step="0.1"
                id="blur-control"
                class="parameter-range-input"
                name="blur"
                value="0.0"
                data-default="0.0"
                autocomplete="off"
                disabled
              />
              <label
                for="blur-control"
                id="blur-value"
                class="value-label-ranges"
              >
                <strong class="horizontal-element"> 0.0 px </strong> - blur
              </label>
            </div>
          </div>
          <!-- Brightness -->
          <div id="brightness-control-container" class="input-container">
            <label for="brightness-control" id="brightness-label">
              Brightness in [%]:
            </label>
            <div class="input-label-container">
              <input
                type="range"
                min="10"
                max="250"
                step="2"
                id="brightness-control"
                class="parameter-range-input"
                name="brightness"
                value="100"
                data-default="100"
                autocomplete="off"
                disabled
              />
              <label
                for="brightness-control"
                id="brightness-value"
                class="value-label-ranges"
              >
                <strong class="horizontal-element"> 100% </strong> - brightness
              </label>
            </div>
          </div>
          <!-- Contrast -->
          <div id="contrast-control-container" class="input-container">
            <label for="contrast-control" id="contrast-label">
              Contrast in [%]:
            </label>
            <div class="input-label-container">
              <input
                type="range"
                min="2"
                max="200"
                step="2"
                id="contrast-control"
                class="parameter-range-input"
                name="contrast"
                value="100"
                data-default="100"
                autocomplete="off"
                disabled
              />
              <label
                for="contrast-control"
                id="contrast-value"
                class="value-label-ranges"
              >
                <strong class="horizontal-element"> 100% </strong> - contrast
              </label>
            </div>
          </div>
          <!-- Saturate -->
          <div id="saturate-control-container" class="input-container">
            <label for="saturate-control" id="saturate-label">
              Saturation in [%]:
            </label>
            <div class="input-label-container">
              <input
                type="range"
                min="0"
                max="200"
                step="2"
                id="saturate-control"
                class="parameter-range-input"
                name="saturate"
                value="100"
                data-default="100"
                autocomplete="off"
                disabled
              />
              <label
                for="saturate-control"
                id="saturate-value"
                class="value-label-ranges"
              >
                <strong class="horizontal-element"> 100% </strong> - saturation
              </label>
            </div>
          </div>
          <!-- Grayscale -->
          <div id="grayscale-control-container" class="input-container">
            <label for="grayscale-control" id="grayscale-label">
              Grayscale in [%]:
            </label>
            <div class="input-label-container">
              <input
                type="range"
                min="0"
                max="100"
                step="2"
                id="grayscale-control"
                class="parameter-range-input"
                name="grayscale"
                value="0"
                data-default="0"
                autocomplete="off"
                disabled
              />
              <label
                for="grayscale-control"
                id="grayscale-value"
                class="value-label-ranges"
              >
                <strong class="horizontal-element"> 0% </strong> - grayscale
              </label>
            </div>
          </div>
          <!-- Hue-rotate -->
          <div id="huerotate-control-container" class="input-container">
            <label for="huerotate-control" id="huerotate-label">
              Hue-rotate in [deg]:
            </label>
            <div class="input-label-container">
              <input
                type="range"
                min="0"
                max="360"
                step="2"
                id="huerotate-control"
                class="parameter-range-input"
                name="hue-rotate"
                value="0"
                data-default="0"
                autocomplete="off"
                disabled
              />
              <label
                for="huerotate-control"
                id="huerotate-value"
                class="value-label-ranges"
              >
                <strong class="horizontal-element"> 0deg </strong> - hue-rotate
              </label>
            </div>
          </div>
          <!-- Radio button selector -->
          <fieldset id="input-type-container">
            <legend>Select type of the properties inputs:</legend>
            <div class="radio-box">
              <input
                type="radio"
                id="sliders-selector1"
                name="input-selector"
                checked
              />
              <label for="sliders-selector1"> Sliders </label>
            </div>
            <div class="radio-box">
              <input
                type="radio"
                id="sliders-selector2"
                name="input-selector"
              />
              <label for="sliders-selector2"> Numerical Inputs </label>
            </div>
          </fieldset>
        </div>
      </section>
    </main>

    <!-- Footer with the information about the author and license -->
    <footer id="page-footer">
      S.K. (GitHub profile:
      <a class="link" href="https://github.com/sklykov" target="_blank">@sklykov</a>
      ), MIT licensed
    </footer>
  </body>
</html>
