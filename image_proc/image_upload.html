<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="S.K., GitHub: @sklykov" />
    <meta name="licensed" content="MIT" />
    <meta name="year" content="2024" />

    <title>Image processing in JS</title>

    <!-- Favicon specification from the local file. Generated by (thanks!): https://favicon.io/favicon-converter/  -->
    <link rel="icon" href="./favicon_image_process.ico" type="image/x-icon" />

    <!-- Load page logic from the external script file -->
    <script src="image_load_process.js"></script>
    <script src="dialog_windows.js"></script>

    <!-- Styling -->
    <link rel="stylesheet" href="image_upload_styles.css" />
  </head>

  <body>
    <dialog id="info-dialog">
      <p>
        Some informational points represented in the dialog window. To close it,
        press 'Esc' or button below.
      </p>
      <p id="info-two-image-elements">
        The image is placed in the &lt canvas &gt HTML element, which allows
        changing image content.
      </p>
      <button id="info-dialog-close-button">X Close</button>
      <!-- Symbol 'X' encoded as &#x2716 causes Prettier to throw Exception -->
    </dialog>

    <!-- Page header spread on the width of a page -->
    <header id="page-header">
      <span> Image processing in JS </span>
      <select id="select-button">
        <option id="about-button">Dev. Hints</option>
        <option disabled>Credentials</option>
      </select>
    </header>

    <!-- Overall container of the page - div element with flex display property for storing children centered and in column  -->
    <div class="flexbox-container">
      <main id="main-container" class="flexbox-container">
        <!-- Page header with the tips -->
        <section id="instructions-header-container">
          <h3 id="project-header">
            Project: Processing of the uploaded image (serverless, no storage
            except on a browser) using vanilla JS
          </h3>
          <div id="usage-info">
            Short instruction of page functionality usage:
            <ol id="info-list">
              <li id="info-point-1">
                Upload an image for processing, using the button below;
              </li>
              <li id="info-point-2">
                Note that the uploaded image is stored only in the browser
                session memory, it will be discarded after page reload / close
              </li>
            </ol>
          </div>
        </section>

        <!-- Upload button, select image file, visible all time -->
        <section id="upload-image-container">
          <label id="upload-info" for="upload-button">
            To proceed, upload image using the button:
          </label>
          <input
            id="upload-button"
            type="file"
            accept="image/.jpg, image/.jpeg, image/.png, image/.bmp"
            title="Upload Image"
          />
        </section>

        <section id="image-associated-ctrls-box">
          <!-- Controlling of  image width -->
          <div id="associated-controls-container">
            <!-- Width of the images control, visible only after image upload -->
            <div id="width-input-container">
              <div id="input-ticks-container">
                <input
                  type="range"
                  min="10"
                  max="100"
                  id="width-image-input"
                  name="width-input"
                  value="55"
                  data-default="55"
                  list="width-ticks"
                  autocomplete="off"
                  disabled
                />
                <datalist id="width-ticks">
                  <option id="min-width-tick" value="10" label="10"></option>
                  <option id="mid-width-tick" value="55" label="55"></option>
                  <option id="max-width-tick" value="100" label="100"></option>
                </datalist>
              </div>
              <label for="widthImageInput" id="width-label">
                - Control image width as % of the page width
              </label>
            </div>

            <!-- Download image button, used for evoking JS code -->
            <button id="download-button">Download Image</button>

            <!-- Clear image from the <canvas> element -->
            <button id="clear-image-button">Clear Image</button>
          </div>

          <div id="image-container">
            <!-- Canvas element - the container for upload image representation -->
            <canvas id="canvas-element">
              This text is displayed if JavaScript is switched off or the
              browser doesn't support canvas element.
            </canvas>
          </div>
        </section>

        <section id="processing-controls">
          <!-- Image container, used for comparison of the effect of applied filter with <canvas> element, invisible now -->
          <img id="img-element" alt="No Image Uploaded if you see this :-)" />
          <!-- Image manipulation controls for effects: blur, ... -->
          <div id="image-manipulation-controls-box">
            <!-- Blur -->
            <div id="blur-control-container">
              <label for="blur-control" id="blur-label">
                Blur by applying Gaussian kernel with width [px]:
              </label>
              <div class="input-label-container">
                <input
                  type="range"
                  min="0.0"
                  max="10.0"
                  step="0.1"
                  id="blur-control"
                  name="blur"
                  value="0.0"
                  data-default="0.0"
                  autocomplete="off"
                  disabled
                />
                <label for="blur-control" id="blur-value">
                  <strong class="horizontal-element"> 0.0 px </strong> - applied
                  blur
                </label>
              </div>
            </div>
            <!-- Brightness -->
            <div id="brightness-control-container">
              <label for="brightness-control" id="brightness-label">
                Brightness in [%]:
              </label>
              <div class="input-label-container">
                <input
                  type="range"
                  min="10"
                  max="250"
                  step="2"
                  id="brightness-control"
                  name="brightness"
                  value="100"
                  data-default="100"
                  autocomplete="off"
                  disabled
                />
                <label for="brightness-control" id="brightness-value">
                  <strong class="horizontal-element"> 100% </strong> - applied
                  brightness
                </label>
              </div>
            </div>
            <!-- Contrast -->
            <div id="contrast-control-container">
              <label for="contrast-control" id="contrast-label">
                Contrast in [%]:
              </label>
              <div class="input-label-container">
                <input
                  type="range"
                  min="2"
                  max="200"
                  step="2"
                  id="contrast-control"
                  name="contrast"
                  value="100"
                  data-default="100"
                  autocomplete="off"
                  disabled
                />
                <label for="contrast-control" id="contrast-value">
                  <strong class="horizontal-element"> 100% </strong> - applied
                  contrast
                </label>
              </div>
            </div>
            <!-- Saturate -->
            <div id="saturate-control-container">
              <label for="saturate-control" id="saturate-label">
                Saturation in [%]:
              </label>
              <div class="input-label-container">
                <input
                  type="range"
                  min="0"
                  max="200"
                  step="2"
                  id="saturate-control"
                  name="saturate"
                  value="100"
                  data-default="100"
                  autocomplete="off"
                  disabled
                />
                <label for="saturate-control" id="saturate-value">
                  <strong class="horizontal-element"> 100% </strong> - applied
                  saturation
                </label>
              </div>
            </div>
            <!-- Grayscale -->
            <div id="grayscale-control-container">
              <label for="grayscale-control" id="grayscale-label">
                Grayscale in [%]:
              </label>
              <div class="input-label-container">
                <input
                  type="range"
                  min="0"
                  max="100"
                  step="2"
                  id="grayscale-control"
                  name="grayscale"
                  value="0"
                  data-default="0"
                  autocomplete="off"
                  disabled
                />
                <label for="grayscale-control" id="grayscale-value">
                  <strong class="horizontal-element"> 0% </strong> - applied
                  grayscale
                </label>
              </div>
            </div>
            <!-- Hue-rotate -->
            <div id="huerotate-control-container">
              <label for="huerotate-control" id="huerotate-label">
                Hue-rotate in [deg]:
              </label>
              <div class="input-label-container">
                <input
                  type="range"
                  min="0"
                  max="360"
                  step="2"
                  id="huerotate-control"
                  name="hue-rotate"
                  value="0"
                  data-default="0"
                  autocomplete="off"
                  disabled
                />
                <label for="huerotate-control" id="huerotate-value">
                  <strong class="horizontal-element"> 0deg </strong> - applied
                  hue-rotate
                </label>
              </div>
            </div>
            <!-- Reset Button -->
            <div id="reset-button-container">
              <button id="reset-button">Reset filters</button>
            </div>
            <!-- Radio button selector -->
            <fieldset id="input-type-container">
              <legend>Select type of the properties inputs:</legend>
              <div class="radio-box">
                <input
                  type="radio"
                  id="sliders-selector1"
                  name="input-selector"
                  checked="true"
                />
                <label for="sliders-selector1"> Sliders </label>
              </div>
              <div class="radio-box">
                <input
                  type="radio"
                  id="sliders-selector2"
                  name="input-selector"
                />
                <label for="sliders-selector2"> Numerical Inputs </label>
              </div>
            </fieldset>
          </div>
        </section>
      </main>

      <!-- Footer with the information about the author and license -->
      <footer id="page-footer">
        S.K. (GitHub profile:
        <a class="link" href="https://github.com/sklykov" target="_blank"
          >@sklykov</a
        >), MIT licensed
      </footer>
    </div>
  </body>
</html>
